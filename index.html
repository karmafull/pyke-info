<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P Y K E . I N F O</title>

    <meta property="og:title" content="P Y K E . I N F O">
    <meta property="og:description" content="The best guide for winning with a Pyke, especially in forbidden roles.">
    <meta property="og:image" content="media/loadingBackground.jpg">
    <meta property="og:type" content="website">
    <meta name="description" content="The best guide for winning with a Pyke, especially in forbidden roles.">
    <meta name="theme-color" content="#A31C2D">

    <link rel="icon" href="https://i.gifer.com/origin/f6/f67132958352b2158810a27303c1b849_w200.gif" type="image/gif">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Pirata+One&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body class="loading-active">
    <!-- Atmospheric Effects Containers -->
    <div id="dark-sea-movement">
        <div class="sea-shadow" id="shadow-1"></div>
        <div class="sea-shadow" id="shadow-2"></div>
    </div>
    <div id="coins-container"></div>
    <div id="sea-floor"></div>
    <div id="ghost-fish-container"></div>
    <div id="deep-sea-fish-container"></div>
    <div id="fog-container">
        <div class="fog" id="fog-1"></div>
        <div class="fog" id="fog-2"></div>
        <div class="fog" id="fog-3"></div>
        <div class="fog" id="fog-4"></div>
        <div class="fog" id="fog-5"></div>
    </div>
    <div id="bubbles-container"></div>
    <div id="eyes-container"></div>
    <div id="error-popups-container"></div>

    <!-- Mobile Warning -->
    <div class="mobile-not-supported-message">
        <div class="message-content">
            Use this page on widescreen PC.
        </div>
    </div>

    <!-- Main Content Wrapper -->
    <div id="desktop-content-wrapper">
        <div id="loading-screen" class="loading-screen loading-bg">
            <div class="loading-content">
                <div class="loading-text" id="loading-text">Loading...</div>
                <div class="spinner"></div>
            </div>
        </div>
            
        <audio id="background-music" loop></audio>

        <!-- Role Selection Screens -->
        <div id="selection-container">
            <div id="pyke-role-screen" class="role-screen pyke-role-bg">
                <div class="selection-box">
                    <h2 class="selection-question">What role is your Pyke?</h2>
                    <div id="pyke-role-buttons" class="role-buttons">
                        <button class="role-btn" data-role="TOP"><img src="media/top.png" alt="Top" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn jungle-disabled" data-role="JUNGLE" disabled><img src="media/jungle.png" alt="Jungle" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="MID"><img src="media/mid.png" alt="Mid" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="ADC"><img src="media/bot.png" alt="ADC" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="SUPPORT"><img src="media/support.png" alt="Support" class="role-img"><span class="role-label"></span></button>
                    </div>
                </div>
            </div>
            <div id="user-role-screen" class="role-screen user-role-bg" style="display: none;">
                <div class="selection-box">
                    <h2 class="selection-question">What role are you?</h2>
                    <div id="user-role-buttons" class="role-buttons">
                        <button class="role-btn" data-role="TOP"><img src="media/top.png" alt="Top" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="JUNGLE"><img src="media/jungle.png" alt="Jungle" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="MID"><img src="media/mid.png" alt="Mid" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="ADC"><img src="media/bot.png" alt="ADC" class="role-img"><span class="role-label"></span></button>
                        <button class="role-btn" data-role="SUPPORT"><img src="media/support.png" alt="Support" class="role-img"><span class="role-label"></span></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Guide Content -->
        <header id="main-header" style="display: none;">
            <div class="pyke-header-content">
                <div class="title-background"><h1>P Y K E . I N F O</h1></div>
                <div class="subtitle-background"><h2>Made by karmafuLL</h2></div>
                <div class="quote-background"><h3 id="header-quote"></h3></div>
            </div>
        </header>

        <main id="guide-content" class="container guide-bg" style="display: none;">
            <section id="how-to-play-section" class="guide-section abyssal-glow"><h2 id="how-to-play-title"></h2><div id="how-to-play-text" class="guide-text-container guide-font"></div></section>
            <section id="why-good-section" class="guide-section abyssal-glow"><h2 id="why-good-title"></h2><div id="why-good-text" class="guide-text-container guide-font"></div></section>
            <section id="optimal-picks-section" class="guide-section abyssal-glow"><h2>Optimal Picks To Play With Pyke <span id="pyke-role-placeholder"></span></h2><ul id="optimal-picks-list" class="guide-font"></ul></section>
        </main>

        <footer id="main-footer" style="display: none;">
            <div class="useful-links">
                <h3>Useful Links</h3>
                <ul>
                    <li><a href="https://mylolmmr.com" target="_blank" rel="noopener noreferrer" class="footer-button">Check your MMR</a></li>
                    <li><a href="https://www.mobafire.com/league-of-legends/build/14-22-karmafulls-season-14-pyke-mid-guide-600378" target="_blank" rel="noopener noreferrer" class="footer-button">Pyke mid guide</a></li>
                    <li><a href="https://modelviewer.lol/champions/pyke" target="_blank" rel="noopener noreferrer" class="footer-button">Pyke 3d skin viewer</a></li>
                    <li><a href="https://porofessor.gg/download?ref=euWQW4aL" target="_blank" rel="noopener noreferrer" class="footer-button">Porofessor</a></li>
                    <li><a href="https://universe.leagueoflegends.com/en_US/story/champion/pyke" target="_blank" rel="noopener noreferrer" class="footer-button">Pyke biography</a></li>
                    <li><a href="https://github.com/karmafull/pyke-info" target="_blank" rel="noopener noreferrer" class="footer-button">Page's GitHub</a></li>
                </ul>
            </div>
            <div class="footer-copyright"><p>Â© 2025 karmafuLL. This page isn't endorsed by Riot Games and doesn't reflect the views or opinions of Riot Games or anyone officially involved in producing or managing League of Legends.</p></div>
        </footer>

        <!-- Floating UI Controls -->
        <div class="ui-wrapper">
            <div class="top-buttons">
                <button id="back-role-selection" aria-label="Back to Role Selection"><i class="fas fa-arrow-left"></i></button>
                <button id="toggle-info-button" aria-label="Toggle Info Box"><i class="fas fa-info"></i></button>
                <button id="toggle-music-controls-button" aria-label="Toggle Music Controls"><i class="fas fa-volume-up"></i></button>
                <button id="toggle-settings-button" aria-label="Toggle Settings"><i class="fas fa-gear"></i></button>
                <button id="toggle-feedback-button" aria-label="Share Feedback"><i class="fas fa-smile"></i></button>
                <a href="https://paypal.me/xkarmafuLL" target="_blank" rel="noopener noreferrer" id="donation-button" aria-label="Donate"><i class="fas fa-dollar-sign"></i></a>
            </div>
            <div id="info-box" class="info-box-collapsed">
                <h2>About karmafuLL</h2>
                <ul>
                    <li>3.5Mil mastery on Pyke</li>
                    <li>Rank 1 Pyke (Leagueofgraphs) multiple times</li>
                    <li>725LP Grandmaster peak</li>
                    <li>Peak 2.7k viewers on twitch after NoWay4u twitch raid for solowinning his soloq game in ~500LP masters.</li>
                    <li>Carried high Elo players like NoWay4u, Spearshot and actual pro players with off role Pyke.</li>
                </ul>
                <div class="social-links-container">
                    <a href="https://www.twitch.tv/xkarmafull" target="_blank" class="social-button" style="background:#6441a5;color:#fff;"><i class="fab fa-twitch"></i> Twitch</a>
                    <a href="https://www.instagram.com/karmafull2" target="_blank" class="social-button" style="background:#E1306C;color:#fff;"><i class="fab fa-instagram"></i> Instagram</a>
                </div>
            </div>
            <div id="music-controls" class="controls music-controls-collapsed">
                <div class="song-title-container"><div id="current-song-info"></div></div>
                 <div class="progress-container">
                    <span id="current-time">0:00</span>
                    <input type="range" id="song-progress-slider" min="0" value="0" class="song-slider">
                    <span id="total-duration">0:00</span>
                </div>
                <div class="music-player-buttons">
                    <button id="prev-button" class="music-nav-button" aria-label="Previous Song"><i class="fas fa-backward"></i></button>
                    <button id="pause-button" class="mute-button" aria-label="Pause Music"><i class="fas fa-play"></i></button>
                    <button id="next-button" class="music-nav-button" aria-label="Next Song"><i class="fas fa-forward"></i></button>
                </div>
                <div class="volume-slider-container">
                     <i class="fas fa-volume-down"></i>
                    <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.15" aria-label="Volume Slider">
                     <i class="fas fa-volume-up"></i>
                </div>
                <ul id="playlist-container"></ul>
            </div>
            <div id="settings-box" class="settings-box-collapsed">
                <h2>Settings</h2>
                <div class="setting-item">
                    <span>Custom Fonts</span>
                    <label class="switch"><input type="checkbox" id="font-toggle" checked><span class="slider round"></span></label>
                </div>
                <div class="setting-item column">
                    <label>Guide Background</label>
                    <div id="splash-selector"></div>
                </div>
                <div class="error-settings-box">
                    <h3>Error Popups</h3>
                    <div class="setting-item">
                        <span>Enable Popups</span>
                        <label class="switch"><input type="checkbox" id="error-toggle" checked><span class="slider round"></span></label>
                    </div>
                    <div class="setting-item column">
                        <label for="error-freq-slider">Frequency: <span id="error-freq-value">10</span>s</label>
                        <div class="error-freq-control">
                            <span>1s</span>
                            <input type="range" id="error-freq-slider" min="1" max="10" value="10">
                            <span>10s</span>
                        </div>
                    </div>
                    <button id="clear-errors-btn">Clear All Errors</button>
                </div>
            </div>
            <div id="feedback-box" class="feedback-box-collapsed">
                <button id="close-feedback-btn" class="close-btn">Ã</button>
                <h2>Share your feedback?</h2>
                <p>Help make P Y K E . I N F O better!</p>
                <p>Add karmafuLL on discord: <strong>karmafuLL.</strong></p>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const backgroundMusic = document.getElementById('background-music');
                const musicControls = document.getElementById('music-controls');
                const pauseButton = document.getElementById('pause-button');
                const volumeSlider = document.getElementById('volume-slider');
                const prevButton = document.getElementById('prev-button');
                const nextButton = document.getElementById('next-button');
                const currentSongInfo = document.getElementById('current-song-info');
                const songProgressSlider = document.getElementById('song-progress-slider');
                const currentTimeDisplay = document.getElementById('current-time');
                const totalDurationDisplay = document.getElementById('total-duration');
                const playlistContainer = document.getElementById('playlist-container');
                const toggleMusicControlsButton = document.getElementById('toggle-music-controls-button');
                const backToRoleSelectionButton = document.getElementById('back-role-selection');
                const toggleInfoButton = document.getElementById('toggle-info-button');
                const infoBox = document.getElementById('info-box');
                const toggleFeedbackButton = document.getElementById('toggle-feedback-button');
                const feedbackBox = document.getElementById('feedback-box');
                const closeFeedbackBtn = document.getElementById('close-feedback-btn');
                const toggleSettingsButton = document.getElementById('toggle-settings-button');
                const settingsBox = document.getElementById('settings-box');
                const fontToggle = document.getElementById('font-toggle');
                const errorToggle = document.getElementById('error-toggle');
                const errorFreqSlider = document.getElementById('error-freq-slider');
                const errorFreqValue = document.getElementById('error-freq-value');
                const clearErrorsBtn = document.getElementById('clear-errors-btn');
                const splashSelector = document.getElementById('splash-selector');
                const loadingScreen = document.getElementById('loading-screen');
                const selectionContainer = document.getElementById('selection-container');
                const pykeRoleScreen = document.getElementById('pyke-role-screen');
                const userRoleScreen = document.getElementById('user-role-screen');
                const pykeRoleButtons = document.getElementById('pyke-role-buttons');
                const userRoleButtons = document.getElementById('user-role-buttons');
                const mainHeader = document.getElementById('main-header');
                const guideContent = document.getElementById('guide-content');
                const mainFooter = document.getElementById('main-footer');
                const headerQuote = document.getElementById('header-quote');
                const howToPlayTitle = document.getElementById('how-to-play-title');
                const howToPlayTextContainer = document.getElementById('how-to-play-text');
                const whyGoodTitle = document.getElementById('why-good-title');
                const whyGoodTextContainer = document.getElementById('why-good-text');
                const pykeRolePlaceholder = document.getElementById('pyke-role-placeholder');
                const optimalPicksList = document.getElementById('optimal-picks-list');

                const playlist = [{ name: "Pyke Theme", src: "media/pykeTheme.mp3" }, { name: "Drown with me", src: "media/Drown with me.mp3" }, { name: "Fire to the Fuse", src: "media/firetothefuse.mp3" }, { name: "Fear the Ripper", src: "media/fear the ripper.mp3" }, { name: "Pyke Hardstyle", src: "media/pyke hardstyle.mp3" }, { name: "Making the Plays", src: "media/making the plays.mp3" }];
                const pykeSkins = [
                    { name: 'Ashen Knight', path: 'media/splash/Ashen_Knight_Pyke_Splash.png' },
                    { name: 'Blood Moon', path: 'media/splash/Blood_Moon_Pyke_Splash.png' },
                    { name: 'Empyrean', path: 'media/splash/Empyrean_Pyke_Splash.png' },
                    { name: 'Prestige Soul Fighter', path: 'media/splash/Prestige_Soul_Fighter_Pyke_Splash.png' },
                    { name: 'PROJECT', path: 'media/splash/PROJECT_Pyke_Splash.png' },
                    { name: 'PsyOps', path: 'media/splash/PsyOps_Pyke_Splash.png' },
                    { name: 'Sand Wraith', path: 'media/splash/Sand_Wraith_Pyke_Splash.png' },
                    { name: 'Sentinel', path: 'media/splash/Sentinel_Pyke_Splash.png' },
                    { name: 'Soul Fighter', path: 'media/splash/Soul_Fighter_Pyke_Splash.png' }
                ];
                const quotes = ["Climbing to Diamond... From Masters.", "Getting flamed for sending P Y K E . I N F O link... My bad guys", "Wow another document I go run you down! >:)", "L9L9L9L9L9L9L9L9L9L9", "PYKE NOT MID CHAMP!", "PYKE NOT TOP CHAMP!", "PYKE NOT ADC CHAMP!", "JUNGLE PYKE PSYCHOSIS", "Sinking in the Elo ocean... Cold down there", "You're on the list."];
                const guideData = {
                    MID_TOP: { play: "As a top laner, try to freeze the wave under your tower or crash it if the enemy is low, creating roaming opportunities for your Pyke mid. Always communicate enemy summoner spell usage, especially Flash, and in teamfights, focus on setting up enemies to be executable for Pyke's ultimate.", why: "A mid lane Pyke provides exceptional roaming pressure and powerful resets during teamfights, and he can effectively follow up on your engages to secure kills.", picks: ["Jax", "Shen", "Kennen", "Malphite", "Warwick"] },
                    ADC_TOP: { play: "Your primary goal in the early game is to play safe and avoid unnecessary deaths. Once Pyke hits level 6, he becomes a teamfight-carrying threat, which is your cue to group up. Always ping enemy Flashes and play around Pyke's ultimate by getting targets into execute range.", why: "Pyke ADC offers devastating resets in teamfights and can reliably follow your engages. He provides a more resilient ADC option that doesn't easily die before level 6.", picks: ["Jax", "Shen", "Kennen", "Malphite", "Warwick"] },
                    SUPPORT_TOP: { play: "Create opportunities for your support Pyke to roam by freezing the wave near your turret or pushing it when the enemy is vulnerable. Keep track of enemy summoner spells and focus on setting up executes for Pyke's ultimate to maximize gold generation.", why: "Pyke support brings strong roaming potential to influence the map, can follow up on your engages, and doubles kill gold with his ultimate, accelerating your team's lead.", picks: ["Jax", "Shen", "Kennen", "Malphite", "Warwick"] },
                    TOP_JUNGLE: { play: "Gank for your top lane Pyke frequently, as he has excellent gank setup. If the enemy's Flash is down, abuse this by repeatedly ganking his lane. Avoid building Collector, since Pyke's ultimate is a far superior execution tool. Look for invades with Pyke when his resources are high and always set up enemies for his R in fights.", why: "Pyke top offers reliable gank assistance and game-changing resets in teamfights. His ultimate shares gold, so always try to let him secure the kill for maximum economic advantage.", picks: ["Pantheon", "Shaco", "Karthus", "Hecarim", "Fiddlesticks"] },
                    MID_JUNGLE: { play: "Your Pyke mid has strong gank setup, so prioritize ganking his lane, especially when the enemy's Flash is on cooldown. Coordinate invades when Pyke has enough health and mana. Remind your team not to buy Collector, and in teamfights, focus on enabling Pyke's ultimate for shared gold and resets.", why: "A mid lane Pyke provides potent gank setup and powerful teamfight resets. His gold-sharing ultimate means you should always aim to feed him the last hit on low-health enemies.", picks: ["Pantheon", "Shaco", "Karthus", "Hecarim", "Fiddlesticks"] },
                    ADC_JUNGLE: { play: "Gank for your ADC Pyke often due to his strong setup, and repeatedly gank when the enemy summoner spells are down. You can also look for invades if Pyke is healthy. Ensure your team understands that Pyke's ultimate is the primary execution tool, making Collector redundant. Prioritize setting up executes for him in all fights.", why: "Pyke in the ADC role offers great gank setup from the bot lane and powerful resets in teamfights. His gold-sharing ultimate is a key economic tool, so let him secure kills whenever possible.", picks: ["Pantheon", "Shaco", "Karthus", "Hecarim", "Fiddlesticks"] },
                    SUPPORT_JUNGLE: { play: "Pyke support provides strong gank setup, so gank his lane often, especially to abuse enemies without Flash. Coordinate with him for invades and securing objectives across the map. Ensure your team avoids Collector and focuses on enabling Pyke's ultimate for its massive gold-sharing advantage.", why: "A support Pyke offers reliable gank assistance and potent invades with his jungler. Use this synergy to take control of the map and extend your team's lead through shared objectives and kills.", picks: ["Pantheon", "Shaco", "Karthus", "Hecarim", "Fiddlesticks"] },
                    TOP_MID: { play: "As a mid laner, help your top Pyke by pushing your wave to create roam timers. Always track enemy summoner spells for him. In teamfights, focus on getting enemies into execute range for his ultimate to trigger resets.", why: "A top lane Pyke brings strong roaming potential to your lane and offers powerful resets during teamfights, effectively following up on any engage you initiate.", picks: ["Orianna", "Xerath", "Galio", "Anivia", "Neeko"] },
                    ADC_MID: { play: "In the early game, focus on surviving and farming safely. When your ADC Pyke reaches level 6, it's time to group and fight as a team. Always communicate enemy cooldowns and assist in setting up targets for Pyke's ultimate.", why: "Pyke as an ADC provides powerful resets in teamfights and can reliably follow your engages. Unlike many traditional ADCs, he is resilient and less prone to dying before level 6.", picks: ["Orianna", "Xerath", "Galio", "Anivia", "Neeko"] },
                    SUPPORT_MID: { play: "When playing with a support Pyke, shove your wave to create roam opportunities for him to impact your lane. Keep track of enemy Flashes and help lower enemies' health for his ultimate. This coordination is key to snowballing.", why: "Pyke support has excellent roaming capabilities and can effectively follow up on your crowd control, turning small advantages into kills and objective control.", picks: ["Orianna", "Xerath", "Galio", "Anivia", "Neeko"] },
                    TOP_ADC: { play: "Your primary job is to farm and scale safely until Pyke hits his level 6 powerspike, then group for teamfights. Avoid building Collector, as Pyke's ultimate is a much better execute. Always ping enemy Flashes and help get targets low for his R.", why: "Pyke top provides strong roams to influence the map and has powerful resets in teamfights. He can effectively follow your damage output to secure kills.", picks: ["Draven", "Tristana", "Nilah", "Jinx", "Ashe"] },
                    MID_ADC: { play: "Focus on surviving the early laning phase. Once your mid Pyke hits level 6, he will look to roam and carry teamfights, so be ready to join him. Don't buy Collector, and always ping enemy summoner spells to help him secure executions.", why: "A mid lane Pyke brings strong roaming pressure to your lane and devastating resets in teamfights, while being able to follow up on your engages seamlessly.", picks: ["Draven", "Tristana", "Nilah", "Jinx", "Ashe"] },
                    SUPPORT_ADC: { play: "Play aggressively with Pyke, looking for all-in opportunities. Freeze the wave to deny CS or crash it to set up dives with your jungler. Ensure you don't build Collector. Always track enemy Flashes and focus on setting up kills for Pyke's ultimate.", why: "This duo has a very strong laning phase and powerful teamfight resets. Pyke's gold-sharing ultimate and ability to follow your damage makes for a lethal combination.", picks: ["Draven", "Tristana", "Nilah", "Jinx", "Ashe"] },
                    TOP_SUPPORT: { play: "Roam to the top lane to create pressure with your Pyke and secure objectives together. Place deep wards with Control Wards to help him find picks across the map. Always track enemy summoner spells and set up targets for his ultimate.", why: "A top lane Pyke provides strong roaming potential and devastating teamfight resets. He can effectively follow up on your engages to turn any fight in your favor.", picks: ["Alistar", "Taric", "Yuumi", "Bard", "Braum"] },
                    MID_SUPPORT: { play: "Look for opportunities to roam to mid lane and coordinate with Pyke to secure kills and objectives. Use Control Wards to establish vision control, allowing him to find picks. Always communicate enemy cooldowns and set up executes for his R.", why: "Pyke mid has strong roaming potential and powerful resets. He synergizes well with engaging supports, allowing you to control the map together.", picks: ["Alistar", "Taric", "Yuumi", "Bard", "Braum"] },
                    ADC_SUPPORT: { play: "Follow up on your ADC Pyke's engages and pick a champion with strong synergy (see optimal picks). Buy Control Wards to maintain vision control in your lane and the river. Always ping enemy summoner spells and help get targets low for his ultimate.", why: "Pyke in the ADC role creates a strong laning phase and offers powerful teamfight resets. He can effectively follow your crowd control to secure kills and snowball the game.", picks: ["Alistar", "Taric", "Yuumi", "Bard", "Braum"] }
                };
                
                let currentSongIndex = 0;
                let hasInteracted = false; 
                let selectedPykeRole = '';
                let selectedUserRole = '';
                let activeEyeSides = { left: false, right: false };
                let areErrorBoxesEnabled = true;
                let errorInterval;
                let errorFrequency = 10000;

                const loadingMessages = ["Sinking from Grandmaster to Diamond 4...", "Missing yet another hook...", "Alt-tabbing at the worst possible time..."];
                document.getElementById("loading-text").textContent = loadingMessages[Math.floor(Math.random() * loadingMessages.length)];
                
                backgroundMusic.volume = 0.15;

                const startMusic = () => { if (!hasInteracted) { backgroundMusic.play().then(() => { hasInteracted = true; pauseButton.innerHTML = '<i class="fas fa-pause"></i>'; }).catch(e => console.error("Music could not be started.", e)); } };
                
                const formatTime = (seconds) => {
                    const min = Math.floor(seconds / 60);
                    const sec = Math.floor(seconds % 60);
                    return isNaN(min) || isNaN(sec) ? "0:00" : `${min}:${sec < 10 ? '0' : ''}${sec}`;
                };

                const updateProgress = () => {
                    const { currentTime, duration } = backgroundMusic;
                    songProgressSlider.value = currentTime || 0;
                    songProgressSlider.max = duration || 0;
                    currentTimeDisplay.textContent = formatTime(currentTime);
                    totalDurationDisplay.textContent = formatTime(duration);
                };

                const updatePlaylistHighlight = () => {
                    playlistContainer.querySelectorAll('li').forEach((item, index) => item.classList.toggle('active', index === currentSongIndex));
                };

                const loadSong = (index, shouldPlay = false) => {
                    currentSongIndex = index;
                    const song = playlist[index];
                    backgroundMusic.src = song.src;
                    currentSongInfo.textContent = song.name;
                    updatePlaylistHighlight();
                    if (shouldPlay) {
                        backgroundMusic.play().then(() => pauseButton.innerHTML = '<i class="fas fa-pause"></i>');
                    } else {
                        pauseButton.innerHTML = '<i class="fas fa-play"></i>';
                    }
                };
                
                const playNextSong = () => loadSong((currentSongIndex + 1) % playlist.length, true);
                const playPreviousSong = () => loadSong((currentSongIndex - 1 + playlist.length) % playlist.length, true);
                
                playlist.forEach((song, index) => {
                    const li = document.createElement('li');
                    li.textContent = song.name;
                    li.dataset.index = index;
                    li.addEventListener('click', () => loadSong(index, true));
                    playlistContainer.appendChild(li);
                });

                pykeSkins.forEach(skin => {
                    const thumb = document.createElement('img');
                    thumb.src = skin.path;
                    thumb.alt = skin.name;
                    thumb.className = 'splash-thumb';
                    thumb.addEventListener('click', () => {
                        guideContent.style.backgroundImage = `url('${skin.path}')`;
                        document.querySelectorAll('.splash-thumb').forEach(t => t.classList.remove('active'));
                        thumb.classList.add('active');
                    });
                    splashSelector.appendChild(thumb);
                });
                
                const populateSentences = (text, container) => { container.innerHTML = ''; text.split('.').filter(s => s.trim().length > 0).forEach(sentence => { const p = document.createElement('p'); p.textContent = sentence.trim() + '.'; container.appendChild(p); }); };
                const setRandomQuote = () => { if(headerQuote) headerQuote.textContent = quotes[Math.floor(Math.random() * quotes.length)]; };
                
                setTimeout(() => {
                    loadingScreen.style.opacity = 0;
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        selectionContainer.style.display = 'block';
                        pykeRoleScreen.style.opacity = 1;
                        pykeRoleScreen.style.display = 'flex';
                        document.body.classList.remove('loading-active');
                        document.body.classList.add('role-select-active');
                        loadSong(0, false);
                    }, 500);
                }, 2000);

                const animateTitle = () => { const titleText = " P Y K E . I N F O "; const icons = ['ðª', 'ð©¸', 'ð', 'ð']; let textIndex = 0; let iconIndex = 0; setInterval(() => { const part1 = titleText.substring(textIndex); const part2 = titleText.substring(0, textIndex); document.title = icons[iconIndex] + part2 + part1; textIndex = (textIndex - 1 + titleText.length) % titleText.length; if(textIndex === titleText.length - 1) iconIndex = (iconIndex + 1) % icons.length; }, 400); };
                animateTitle();

                const bubblesContainer = document.getElementById('bubbles-container');
                for (let i = 0; i < 40; i++) { const b = document.createElement('div'); b.className = 'bubble'; b.style.left = `${Math.random()*100}vw`; b.style.animationDuration = `${Math.random()*8+6}s`; b.style.animationDelay = `${Math.random()*10}s`; const s = Math.random()*20+5; b.style.width = `${s}px`; b.style.height = `${s}px`; b.style.opacity = Math.random()*.7+.2; bubblesContainer.appendChild(b); }
                
                const eyesContainer = document.getElementById('eyes-container');
                const eyeColors = ['#000000', '#1a0000', '#2b0000', '#3d0000', '#500000'];
                function createEye() {
                    const availableSides = Object.keys(activeEyeSides).filter(side => !activeEyeSides[side]);
                    if (availableSides.length === 0) return;
                    const side = availableSides[Math.floor(Math.random() * availableSides.length)];
                    activeEyeSides[side] = true;
                    const eyePair = document.createElement('div'); eyePair.className = 'eye-pair';
                    if (side === 'left') eyePair.style.left = `${Math.random()*10}vw`; else eyePair.style.right = `${Math.random()*10}vw`;
                    eyePair.style.top = `${Math.random()*80+10}vh`;
                    const duration = Math.random()*4+3;
                    eyePair.style.animation = `fade-in-out ${duration}s ease-in-out`;
                    eyePair.style.setProperty('--eye-color', eyeColors[Math.floor(Math.random()*eyeColors.length)]);
                    eyesContainer.appendChild(eyePair);
                    setTimeout(() => { eyePair.remove(); activeEyeSides[side] = false; }, duration * 1000);
                }
                setInterval(createEye, 2000);

                const deepSeaFishContainer = document.getElementById('deep-sea-fish-container');
                const fishImages = ['https://storage.googleapis.com/gemini-web-resources/pyke-guide/fish1.png', 'https://storage.googleapis.com/gemini-web-resources/pyke-guide/fish2.png'];
                function createDeepSeaFish() {
                    if (!document.body.classList.contains('guide-active')) return;
                    const fish = document.createElement('div');
                    fish.className = 'deep-sea-fish';
                    fish.style.backgroundImage = `url('${fishImages[Math.floor(Math.random() * fishImages.length)]}')`;
                    
                    const side = Math.random() > 0.5 ? 'left' : 'right';
                    fish.style.top = `${Math.random() * 80 + 10}vh`;
                    fish.style.width = `${Math.random() * 100 + 150}px`;
                    fish.style.animationDuration = `${Math.random() * 20 + 25}s`;

                    if(side === 'left') {
                        fish.style.animationName = 'swim-right';
                        fish.style.left = '-250px';
                    } else {
                        fish.style.animationName = 'swim-left';
                        fish.style.right = '-250px';
                    }
                    deepSeaFishContainer.appendChild(fish);
                    setTimeout(() => fish.remove(), parseInt(fish.style.animationDuration) * 1000);
                }
                setInterval(createDeepSeaFish, 12000);

                const errorPopupsContainer = document.getElementById('error-popups-container');
                const errorMessages = [ { q: "LP gain seems a bit low. Recalibrate?", b1: "Yes", b2: "No" }];
                function createErrorBox() {
                    if (!document.body.classList.contains('guide-active') || !areErrorBoxesEnabled) return;
                    const errorData = errorMessages[Math.floor(Math.random()*errorMessages.length)];
                    const errorBox = document.createElement('div'); errorBox.className = 'error-box';
                    errorBox.innerHTML = `<div class="error-title-bar"><span>Error</span><button class="error-close-btn">Ã</button></div><div class="error-content"><div class="error-icon">!</div><p>${errorData.q}</p></div><div class="error-buttons"><button>${errorData.b1}</button><button>${errorData.b2}</button></div>`;
                    errorBox.style.top = `${Math.random()*60+15}vh`;
                    const side = Math.random() > 0.5 ? 'left' : 'right';
                    if (side === 'left') errorBox.style.left = `${Math.random()*15}vw`; else errorBox.style.right = `${Math.random()*15}vw`;
                    errorPopupsContainer.appendChild(errorBox);
                    const closeError = () => { errorBox.style.opacity = '0'; setTimeout(() => errorBox.remove(), 300); };
                    errorBox.querySelectorAll('button').forEach(btn => btn.addEventListener('click', closeError));
                }
                
                function startErrorInterval() {
                    if (errorInterval) clearInterval(errorInterval);
                    errorInterval = setInterval(createErrorBox, errorFrequency);
                }
                startErrorInterval();

                backgroundMusic.addEventListener('loadedmetadata', updateProgress);
                backgroundMusic.addEventListener('timeupdate', updateProgress);
                backgroundMusic.addEventListener('ended', playNextSong);
                songProgressSlider.addEventListener('input', (e) => backgroundMusic.currentTime = e.target.value);
                volumeSlider.addEventListener('input', (e) => { backgroundMusic.volume = e.target.value; });
                prevButton.addEventListener('click', playPreviousSong);
                nextButton.addEventListener('click', playNextSong);
                pauseButton.addEventListener('click', (event) => { event.stopPropagation(); if (!hasInteracted) { startMusic(); return; } if (backgroundMusic.paused) { backgroundMusic.play(); pauseButton.innerHTML = '<i class="fas fa-pause"></i>'; } else { backgroundMusic.pause(); pauseButton.innerHTML = '<i class="fas fa-play"></i>'; } });

                const closeAllPanels = () => {
                    infoBox.classList.add('info-box-collapsed');
                    musicControls.classList.add('music-controls-collapsed');
                    feedbackBox.classList.add('feedback-box-collapsed');
                    settingsBox.classList.add('settings-box-collapsed');
                };
                
                toggleMusicControlsButton.addEventListener('click', () => { const isCollapsed = musicControls.classList.contains('music-controls-collapsed'); closeAllPanels(); if (isCollapsed) musicControls.classList.remove('music-controls-collapsed'); });
                toggleInfoButton.addEventListener('click', () => { const isCollapsed = infoBox.classList.contains('info-box-collapsed'); closeAllPanels(); if (isCollapsed) infoBox.classList.remove('info-box-collapsed'); });
                toggleFeedbackButton.addEventListener('click', () => { const isCollapsed = feedbackBox.classList.contains('feedback-box-collapsed'); closeAllPanels(); if (isCollapsed) feedbackBox.classList.remove('feedback-box-collapsed'); });
                toggleSettingsButton.addEventListener('click', () => { const isCollapsed = settingsBox.classList.contains('settings-box-collapsed'); closeAllPanels(); if (isCollapsed) settingsBox.classList.remove('settings-box-collapsed'); });
                closeFeedbackBtn.addEventListener('click', () => feedbackBox.classList.add('feedback-box-collapsed'));
                
                fontToggle.addEventListener('change', (e) => document.body.classList.toggle('no-custom-fonts', !e.target.checked));
                errorToggle.addEventListener('change', (e) => areErrorBoxesEnabled = e.target.checked);
                errorFreqSlider.addEventListener('input', (e) => {
                    errorFrequency = parseInt(e.target.value) * 1000;
                    errorFreqValue.textContent = e.target.value;
                    startErrorInterval();
                });
                clearErrorsBtn.addEventListener('click', () => {
                    errorPopupsContainer.innerHTML = '';
                });

                backToRoleSelectionButton.addEventListener('click', () => {
                    document.body.classList.remove('guide-active');
                    document.body.classList.add('role-select-active');
                    mainHeader.style.display = 'none';
                    guideContent.style.display = 'none';
                    mainFooter.style.display = 'none';
                    selectionContainer.style.display = 'block';
                    userRoleScreen.style.opacity = 0;
                    setTimeout(() => userRoleScreen.style.display = 'none', 500);
                    pykeRoleScreen.style.display = 'flex';
                    pykeRoleScreen.style.opacity = 1;
                });
                
                pykeRoleButtons.addEventListener('click', (event) => {
                    startMusic();
                    const targetButton = event.target.closest('.role-btn');
                    if (targetButton && !targetButton.disabled) {
                        selectedPykeRole = targetButton.dataset.role;
                        Array.from(userRoleButtons.children).forEach(button => button.disabled = (button.dataset.role === selectedPykeRole));
                        pykeRoleScreen.style.opacity = 0;
                        setTimeout(() => { pykeRoleScreen.style.display = 'none'; userRoleScreen.style.display = 'flex'; userRoleScreen.style.opacity = 1; }, 500);
                    }
                });

                userRoleButtons.addEventListener('click', (event) => {
                    const targetButton = event.target.closest('.role-btn');
                    if (targetButton && !targetButton.disabled) {
                        selectedUserRole = targetButton.dataset.role;
                        const key = `${selectedPykeRole}_${selectedUserRole}`;
                        const data = guideData[key];
                        if (data) {
                            setRandomQuote();
                            const randomSkin = pykeSkins[Math.floor(Math.random()*pykeSkins.length)];
                            guideContent.style.backgroundImage = `url('${randomSkin.path}')`;
                            document.querySelectorAll('.splash-thumb').forEach(thumb => thumb.classList.toggle('active', thumb.src.includes(randomSkin.path)));
                            howToPlayTitle.textContent = `How to play with ${selectedPykeRole} Pyke as ${selectedUserRole}`;
                            populateSentences(data.play, howToPlayTextContainer);
                            whyGoodTitle.textContent = `Why ${selectedPykeRole} Pyke is good with ${selectedUserRole}`;
                            populateSentences(data.why, whyGoodTextContainer);
                            pykeRolePlaceholder.textContent = `(${selectedPykeRole})`;
                            optimalPicksList.innerHTML = '';
                            data.picks.forEach(pick => { const li=document.createElement('li'); const img=document.createElement('img'); const championName=pick.replace(/\s/g, '').replace(/'/g, ''); img.src=`https://raw.githubusercontent.com/TheePepS/League_Of_Legends_Assets/master/Champions_assets/${championName}.png`; img.alt=pick; img.className='champion-icon'; const span=document.createElement('span'); span.textContent=pick; li.appendChild(img); li.appendChild(span); optimalPicksList.appendChild(li); });
                            userRoleScreen.style.opacity = 0;
                            setTimeout(() => {
                                selectionContainer.style.display = 'none';
                                document.body.classList.remove('role-select-active');
                                document.body.classList.add('guide-active');
                                mainHeader.style.display = 'block';
                                guideContent.style.display = 'block';
                                mainFooter.style.display = 'flex';
                            }, 500);
                        } else {
                            alert('No guide data found for this role combination.');
                        }
                    }
                });
            });
        </script>
    </div>
</body>
</html>